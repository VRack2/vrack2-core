# Bootstrap Классы

Bootstrap классы предоставляют механизм для расширения функционала сервисов без использования устройств. Они инициализируются после создания контейнера, но до его запуска, позволяя подписываться на события контейнера и изменять его поведение.

## Основные возможности

- Расширение возможностей контейнера
- Изменение стандартного поведения контейнера
- Замена стандартных Bootstrap классов
- Интеграция с основным процессом загрузки

## Стандартные Bootstrap Классы

Следующие классы являются обязательными для загрузки контейнера:

| Класс             | Описание |
|-------------------|----------|
| **DeviceManager** | Предоставляет информацию об устройствах (списки, информация об устройстве, создание экземпляров) |
| **DeviceFileStorage** | Обеспечивает сохранение и восстановление сохраняемых данных устройств |
| **DeviceMetrics** | Отвечает за сохранение метрик устройств |
| **StructureStorage** | Обеспечивает обновление структуры контейнера |

*Примечание:* Несмотря на обязательность этих классов, их можно заменить пользовательскими реализациями с аналогичным интерфейсом.

## Настройка Bootstrap Классов

Загрузкой Bootstrap классов занимается класс `MainProcess`. При его инициализации можно:

1. Заменить список классов на пользовательский
2. Изменить настройки, передаваемые в эти классы

### Пример конфигурации

```javascript
const MainProcessEx = new MainProcessClass({ 
    id, 
    service, 
    bootstrap: {
        DeviceManager: { 
            path: 'vrack2-core.DeviceManager', 
            options: { storageDir: './storage' }
        },
        DeviceStorage: { 
            path: 'vrack2-core.DeviceFileStorage', 
            options: {} 
        },
        StructureStorage: { 
            path: 'vrack2-core.StructureStorage', 
            options: {} 
        },
        DeviceMetrics: { 
            path: 'vrack2-core.DeviceMetrics', 
            options: {} 
        }
    }
})
```

**Примечания:**
- Bootstrap классы привязываются к идентификатору
- Пути указываются в формате `ImportManager`
- Классы должны быть оформлены как npm модули

## Создание пользовательских Bootstrap Классов

Все Bootstrap классы должны наследовать базовый класс `vrack2-core.BootClass`.

### Структура класса

1. **checkOptions()** - метод для переопределения параметров (аналогично классу устройства)
2. **process()** и **processPromise()** - методы для реализации основной логики класса

В методах `process()` и `processPromise()` доступен объект `Container`, для которого запускается класс

### Рекомендации

Для разработки собственных Bootstrap классов рекомендуется изучить существующие реализации в VRack2 Core.
